import"./vue.9ede1274.js";import{t as e,d as l,c as t}from"./lodash-es.4d7e79d7.js";import{e as a,a1 as o,o as r,c as n,w as s,k as i,p as u,n as c,u as d,q as p,x as v,E as h,F as b,O as m,f,L as y,M as w,a3 as x,H as z,s as g,a as E,h as S,v as _}from"./@vue.12b50aee.js";var T=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,$=(e,l,t)=>l in e?T(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,O=(e,l)=>{for(var t in l||(l={}))M.call(l,t)&&$(e,t,l[t]);if(H)for(var t of H(l))I.call(l,t)&&$(e,t,l[t]);return e},D=(e,l)=>L(e,P(l));const j=["onPointerdown"];const A=a(D(O({},{name:"ScrollbarThumb"}),{props:{type:null,autoExpand:null,autoHide:null,autoHideDelay:null,fixedThumb:null,scrollInfo:null,wrapperEl:null},setup:function(l,{expose:t}){const a=l;let r=null,v=o(null);const h={pageX:0,pageY:0,scrollPos:0};let m=null;const E=()=>{r=setTimeout((()=>{v.value&&v.value.classList.remove("scrollbar__thumbPlaceholder--scrolling"),r=null}),a.autoHideDelay)},S=()=>{null!==r&&clearTimeout(r)};f(S);const _=e((e=>{e.stopPropagation(),e.preventDefault();const l="horizontal"===a.type?"pageX":"pageY",t=(e[l]-h[l])/a.scrollInfo.wrapperMainSize*a.scrollInfo.contentMainSize;a.wrapperEl.scrollTo({["horizontal"===a.type?"left":"top"]:h.scrollPos+t,behavior:"auto"})}),16),T=()=>{E(),v.value.removeEventListener("pointermove",_),v.value.removeEventListener("pointerup",T),v.value.removeEventListener("pointercancel",T),v.value.removeEventListener("mousewheel",T),document.removeEventListener("mousewheel",T),"number"==typeof m&&v.value.releasePointerCapture(m),m=null},L=e=>{e.ctrlKey||0!==e.button||(S(),h.pageX=e.pageX,h.pageY=e.pageY,h.scrollPos=a.wrapperEl["horizontal"===a.type?"scrollLeft":"scrollTop"],m=null==e?void 0:e.pointerId,v.value.setPointerCapture(m),v.value.addEventListener("pointermove",_),v.value.addEventListener("pointerup",T),v.value.addEventListener("pointercancel",T),v.value.addEventListener("mousewheel",T,{passive:!1}),document.addEventListener("mousewheel",T,{passive:!1}),v.value.classList.add("scrollbar__thumbPlaceholder--scrolling"))};t({autoHideAfterScroll:()=>{S(),v.value&&v.value.classList.add("scrollbar__thumbPlaceholder--scrolling"),E()}});let P=o(!1),H=o(!1),M=o(null),I=null,$=null,O=n((()=>a.fixedThumb&&!H.value));const D=([e])=>H.value=e.isIntersecting,A=([e])=>P.value=e.isIntersecting,k=()=>{I&&(I.disconnect(),I=null),$&&($.disconnect(),$=null)};return s((()=>[a.fixedThumb,a.wrapperEl]),(()=>{if(!a.fixedThumb||!a.wrapperEl)return k();k(),$=new IntersectionObserver(A,{threshold:[0,.5]}),$.observe(a.wrapperEl),I=new IntersectionObserver(D),I.observe(M.value)})),f(k),(e,t)=>(i(),u(b,null,[y(c("div",{class:d(["scrollbar__thumbPlaceholder",`scrollbar__thumbPlaceholder--${l.type}`,{"scrollbar__thumbPlaceholder--autoHide":l.autoHide,"scrollbar__thumbPlaceholder--autoExpand":l.autoExpand}]),style:p({width:"horizontal"===l.type?`${l.scrollInfo.thumbSize}px`:"",height:"vertical"===l.type?`${l.scrollInfo.thumbSize}px`:"",position:O.value?"fixed":"absolute",["vertical"===l.type?"top":"left"]:O.value?`${l.scrollInfo.boundaryDistance+3}px`:"3px"}),ref:(e,l)=>{l.thumbEl=e,v.value=e},onPointerdown:z(L,["stop"])},[t[0]||(x(-1),t[0]=c("div",{class:d(["scrollbar__thumb",`scrollbar__thumb--${l.type}`])},null,2),x(1),t[0])],46,j),[[w,Boolean(l.scrollInfo.thumbSize)&&(!l.fixedThumb||P.value)]]),a.fixedThumb?y((i(),u("div",{key:0,ref:(e,l)=>{l.shepherdEl=e,M.value=e},class:d(["scrollbar__shepherd",`scrollbar__shepherd--${l.type}`])},null,2)),[[w,Boolean(l.scrollInfo.thumbSize)]]):g("",!0)],64))}})),k={wait:333,type:"debounce"};function C(...t){const a="value"in(null==t?void 0:t[0]);let r;r=a?null==t?void 0:t[1]:null==t?void 0:t[0];const{wait:n,type:s,callback:i}=O(O({},k),r),u=a?t[0]:o(null),c=E({left:0,top:0,right:0,bottom:0,width:0,height:0,x:0,y:0}),d=()=>{const e=u.value.getBoundingClientRect();c.left=e.left,c.top=e.top,c.right=e.right,c.bottom=e.bottom,c.width=e.width,c.height=e.height,c.x=e.x,c.y=e.y,null==i||i()};let p=null,v=null;const h=()=>{p&&window.removeEventListener("resize",p),v&&(v.disconnect(),v=null)};return S((()=>{u.value&&(h(),p=d,"throttle"===s&&n>=4?p=e(p,n):"debounce"===s&&n>=4&&(p=l(p,n)),window.addEventListener("resize",p),v=new ResizeObserver(p),v.observe(u.value))})),f(h),a?c:[u,c]}const R={class:"scrollbar__wrapper"};const W=a(D(O({},{name:"CustomScrollbar",inheritAttrs:!1}),{props:{contentClass:null,contentStyle:null,direction:{default:"vertical"},thumbMinSize:{default:48},thumbMaxSize:{default:1/0},autoHide:{default:!0},autoHideDelay:{default:900},autoExpand:{default:!0},fixedThumb:null,throttleType:{default:"debounce"},throttleWait:{default:333},simulateScroll:null},emits:["wrapperResize","contentResize","scroll"],setup:function(e,{expose:l,emit:a}){const f=e,y={horizontal:{el:null,instance:null},vertical:{el:null,instance:null}};let w=o(null),x=o(null);r((()=>{var e;const l=Array.from(null==(e=w.value.parentElement)?void 0:e.childNodes);for(const t in y)y[t].el=l.find((e=>{var l;return null==(l=null==e?void 0:e.classList)?void 0:l.contains(`scrollbar__thumbPlaceholder--${t}`)}))}));const z=C(w,{wait:f.throttleWait,type:f.throttleType,callback:T}),g=C(x,{wait:f.throttleWait,type:f.throttleType,callback:T});let E=o(0),S=o(0);function T(){E.value=Math.max(w.value.scrollHeight-z.height|0,0),S.value=Math.max(w.value.scrollWidth-z.width|0,0)}let L=n((()=>({thumbSize:S.value?t(z.width/w.value.scrollWidth*z.width,f.thumbMinSize>z.width?48:f.thumbMinSize,f.thumbMaxSize):0,contentMainSize:g.width,wrapperMainSize:z.width,boundaryDistance:Math.abs(z.left)}))),P=n((()=>({thumbSize:E.value?t(z.height/w.value.scrollHeight*z.height,f.thumbMinSize>z.height?48:f.thumbMinSize,f.thumbMaxSize):0,contentMainSize:g.height,wrapperMainSize:z.height,boundaryDistance:Math.abs(z.top)}))),H=n((()=>z.height-P.value.thumbSize-5)),M=n((()=>z.width-L.value.thumbSize-5));const I=()=>{S.value&&(y.horizontal.el.style.transform=`translate3d(${w.value.scrollLeft/S.value*M.value}px, 0, 0)`,y.horizontal.instance.autoHideAfterScroll()),E.value&&(y.vertical.el.style.transform=`translate3d(0, ${w.value.scrollTop/E.value*H.value}px, 0)`,y.vertical.instance.autoHideAfterScroll())};s((()=>[S.value,E.value]),I);const $=e=>{f.simulateScroll?(e=>{e.stopPropagation();const l=w.value.scrollLeft,o=w.value.scrollTop,r=0|t(l+((null==e?void 0:e.deltaX)||0),0,S.value),n=0|t(o+((null==e?void 0:e.deltaY)||0),0,E.value);w.value.scrollLeft=r,w.value.scrollTop=n,S.value&&(y.horizontal.el.style.transform=`translate3d(${r/S.value*M.value}px, 0, 0)`,y.horizontal.instance.autoHideAfterScroll()),E.value&&(y.vertical.el.style.transform=`translate3d(0, ${n/E.value*H.value}px, 0)`,y.vertical.instance.autoHideAfterScroll()),a("scroll",{target:w.value,scrollLeft:r,scrollTop:n})})(e):I()};return s(z,(()=>a("wrapperResize",z))),s(g,(()=>a("contentResize",g))),l({scrollEl:w}),(l,t)=>(i(),u("div",R,[c("div",h({ref:(e,l)=>{l.wrapperEl=e,w.value=e},class:"scrollbar__scroller"},l.$attrs,{onWheel:$,onScroll:$}),[c("div",{ref:(e,l)=>{l.contentEl=e,x.value=e},class:d(["scrollbar__content",e.contentClass,{"scrollbar__content--fixedThumb":e.fixedThumb,[`scrollbar__content--${e.direction}`]:e.direction}]),style:p(e.contentStyle)},[v(l.$slots,"default")],6)],16),(i(),u(b,null,m(y,((l,t)=>_(A,{ref:e=>((e,l)=>{y[l].instance||(y[l].instance=e)})(e,t),key:t,autoExpand:e.autoExpand,autoHide:e.autoHide,autoHideDelay:e.autoHideDelay,fixedThumb:t!==e.direction&&e.fixedThumb,type:t,scrollInfo:"vertical"===t?P.value:L.value,wrapperEl:w.value},null,8,["autoExpand","autoHide","autoHideDelay","fixedThumb","type","scrollInfo","wrapperEl"]))),64))]))}}));export{W as _};
